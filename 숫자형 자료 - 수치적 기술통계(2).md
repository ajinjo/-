# 숫자형 자료 - 수치 요약 방법 

---------------

> - 선형적 연관성

1. 선형적 연관성 

   - 선형적 연관성을 가지는 자료라면 
   - 우리가 알고자 하는 것 : ***** 방향, 강도  *****

   - 두개의 숫자형 변수 주어져 있을 때
   - (x가 얼마일때 y가 얼마 이런형태로 쌍으로 자료가 주어져 있을 때)
   - 두 숫자형 변수의 연관성 
   - 그중에서도 선형적 연관성을 나타내는 지표들을 학습하겠다.
   - 선형적 연관성이 무엇이냐?
   - x가 클 때 y도 동시에 크고, x가 작을 때 y도 동시에 작고 이렇거나
   - x가 클 때 y는 작고, x가 작을 때 y는 큰 비례 또는 반비례 관계이면
   - 선형의 관계라고 표현한다
   - 이때 선형적 연관성에서 두가지에 관심가지는데
   - 하나는 방향, 하나는 강도
   - 이런것들이 우리가 알고자하는 내용
   - 선형적 연관성을 가지는 자료라고 한다면

   - x가 얼마일때 y가 얼마이더라를 점들로 표현
   - <img src="C:\Users\ajin1\AppData\Roaming\Typora\typora-user-images\image-20210820210922338.png" alt="image-20210820210922338" style="zoom:67%;" />
   - <img src="C:\Users\ajin1\AppData\Roaming\Typora\typora-user-images\image-20210820211008885.png" alt="image-20210820211008885" style="zoom:67%;" />
   - 이것이 방향
   - 선형관계의 방향은 양이냐 음이냐 알고자 할 것임
   - 그것말고 선형관계의 강도는
   - 강도가 강하냐 약하냐
   - 선형관계 강하다면 선이 지나간다했을 때 선의 부근에 값이 분포
   - 선형관계 약하다면 선에서 떨어져 있는 곳에 값이 분포
   - 값이 모여있냐 흩뿌려있느냐로 강도파악
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210820211158590.png" alt="image-20210820211158590" style="zoom:67%;" />
   - 이런것들을 수치적으로 요약하고 싶으면 
   - 이때 사용할 수 있는게 공분산과 상관계수
   - 지표들이 가지는 특징과 해석방법 알아보겠음

2. 표본 공분산(Sample Covariance)

   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210820235114118.png" alt="image-20210820235114118" style="zoom:50%;" />
   - 표본자료로 계산한 공분산
   - 어떤사람의 키와 그사람의 몸무게 n명에 대해 짝지어 관찰 되었다면
   - 산점도 그려보면 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210820235301680.png" alt="image-20210820235301680" style="zoom:50%;" />
   - 이런식으로 x와 y의 관계는 이런 패턴을 보이는 경우가 많을 것임
   - 양이 선형관계 가지는
   - 이거를 수치로 요약해서 알고자 함
   - 그래서 Sxy라는 공분산지표를 정의를 함
   - xi가 자신의 평균으로부터의 편차 yi가 자신의 평균으로부터의 편차
   - 그 둘을 곱해서 평균적으로 얼마일까를 구함
   - 왜이렇게 구하는지 보면
   - 평균 가운데 십자가 기준으로 
   - 평균중심으로해서 둘다 양의편차 가질 수 있고 아닐 수 있음
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821000208762.png" alt="image-20210821000208762" style="zoom:67%;" />
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821000151713.png" alt="image-20210821000151713" style="zoom:67%;" />
   - 양의편차(+) * 양의편차(+) = (+) : 곱한 값도 양수 : A지역 관찰치
   - 음의편차(-) * 음의편차(-) = (+) : B지역 관찰치
   - 모든 자료들이 위에 둘중하나에 놓여있다면 편차의 곱은 무조건 양의값 가질 것 
   - 그러나 전부다 그렇지는 않을 것임 
   - 다른데도 좀 씩 잇을거임
   - 그래서 n개 자료 가져왔을 때 평균적으로 얼마냐 개념이 필요해지는거임
   - 평균 기준으로 만든 이 십자가 기준으로
   - A 또는 B에 값이 많으면 많을수록 Sxy값이 커지고 플러스가 될 것임
   - 따라서 Sxy값이 양수면 두 변수는 양의 선형관계에 있다라고 말할 수 있음
   - 오른쪽 음의 선형관계 가지는 경우도 보면
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821000115156.png" alt="image-20210821000115156" style="zoom:67%;" />
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821000137491.png" alt="image-20210821000137491" style="zoom:67%;" />
   - A지역 자료들 : x는 평균보다 작고(-) *  y는 평균보다 큼(+)
   - B지역 자료들 :  x는 평균보다 크고(+) *  y는 평균보다 작음(-)
   - 편차가 + 곱하기 - 거나 -곱하기 +가 됨
   - 어떻게 곱하든 부호가 다르니까 얘네들 곱한 결과는 음수가 될 것임 
   - 평균적으로 음수가 많으면 Sxy값이 음수가 되겠지 
   - 따라서 Sxy값이 음수값가지면
   - 두 변수는 음의 선형관계를 가진다 라고 해석 가능함 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821001321176.png" alt="image-20210821001321176" style="zoom:50%;" />

   * <<선형관계의 강도>>

   - 우리가 원하는건 강도도 알고 싶음
   - 선형관계가 얼마나 강한지를
   - Sxy=0에 가까우면  어느방향으로도 선형관계가 존재하지 않는 것임
   - Sxy=0이면 그러나 비선형 관계를 가질수는 있기 때문에 두 변수가 독립이라고 말할 수는 없음 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821000616174.png" alt="image-20210821000616174" style="zoom:50%;" />
   - 그리고 Sxy가 절대값이 커지면 커질수록 선형관계가 강해짐
   - Sxy 절대값 큰 경우 : 커지면 커질수록 선 주변에 모여드는 패턴을 가짐 
   - Sxy 절대값으로 강도 파악할 수 있기는 한데 약간 이거로 부족함 
   - 왜냐? 이론적으로 가질 수 있는 값의 상한과 하한이 자료의 스케일에 의존하기 때문
   - 각각의 표준편차의 곱에 의존
   - ex) 어느 자료의 공분산이 100이 나왔어 근데 그 자료의 각각의 표준편차가 Sx=20 Sy=50이야
   - 그러면 Sx * Sy두개 곱하면 1000이지
   - Sxy=100이면 이게 얼마나 크지?를 판단해야하는데
   - Sx * Sy두개 곱하면 1000 이런 스케일 가진 공분산에 비하면 작지 
   - 그러면 공분산이 100이라도 별로 선형관계가 강하지 않은게 되어버림 
   - ...
   - 근데 만약 각 표본 편차의 표준편차가 예를 들어  Sx=5, Sy=20 이였다고 해보자
   - 그러면 곱이 100이고 공분산이 100이 나왔다면 
   - 표준편차가 5인자료와 표준편차가20인걸 가지고 만들어내는 선형관계중
   - 가장 강한 선형관계를 가지는 셈임
   - 이런 경우였다면 두 변수는 완벽한 선형관계가 존재하는 것임 
   - 따라서,
   - 표본 공분산가지고 절대값클수록 강하다고 말할 수는 있지만
   - 이 값이 얼마나 커야 관계가 강하냐
   - 는 자료마다 다르다. 어떻게 다르냐면
   - 그 자료의 표준편차의 곱이 뭔지를 알아야 한다
   - 음의 방향도 똑같다. 마찬가지임. 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821002423251.png" alt="image-20210821002423251" style="zoom:50%;" />
   - 결국 Sxy가 각 변수의 표준편차의 곱 Sx곱하기 * Sy과 비교해서
   - 곱에 가깝에 크면 굉장히 강한 관계가 되는 거고
   - 상대적으로 작으면 선형관계는 강하지 않다고 할 수 있음.
   - 표본 공분산이 선형적 연관성의 지표로 안좋은 점이라고 볼 수 있음
   - 왜냐면 지표자체로 강도가 어떻다 라는 말을 못하기 때문임
   - ...
   - 그것 말고도 표본 공분산은 단위에 의존한다는 단점이 있음.
   - 만약에 x와 y가 원래 kg단위로 측정한 지표였다고 하자
   - 이거를 그램단위로 바꾸는거야 kg을 그램단위로 바꾸면
   - 1000을 곱하면되지 a와 c가 1000이야 
   - x에 1000곱하고 y에 1000곱해서 x`과 엑스프라임과 
   - y` 와이프라임 만들었어
   - 단위만 변환한거야 근데 공분산에는 이런 변화가 생겨버려
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821002023459.png" alt="image-20210821002023459" style="zoom:50%;" />
   -  1000 * 1000 * 원래공분산 이 되어버림 
   - a * c * 원래공분산(Sxy)
   - 공분산값이 엄청 커져버림 
   - 자료의 스케일에 의존하는 특징 때문임
   - 특정 단위만 바꿔도 공분산지표가 이렇게 크게 변하는건 해석에 있어 좋은게 아님 
   - 단위만 바꾼다해도 
   - 산점도상 강도나 방향에는 아무런 변화가 생기지 않기 때문임
   - 공분산 값은 자료의 단위나 스케일에 의존한다.
   - 두 변수 간에 비례관계이면 공분산은 양의 값을 가진다.
   - 한 변수 값이 클 때 다른 변수 값이 작은 경향을 가지는 경우 공분산은 음의 값을 가질 것이다. 

3. 표본 상관계수 (Sample Correlation, 피어슨의 상관계수)

   - 공분산 단점 보완하는 지표
   - 상관계수는 종류가 여러개 있는데
   - 피어슨 상관계수가 가장 많이 활용됨 
   - 표본 공분산을 표준편차의 곱으로 나눔
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821001112892.png" alt="image-20210821001112892" style="zoom:50%;" />
   - rxy라고 정의함 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821002454526.png" alt="image-20210821002454526" style="zoom:50%;" />
   - 이것은
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821002652264.png" alt="image-20210821002652264" style="zoom:50%;" />
   - 요 사실로부터 이거로 나누는 rxy는 언제나 -1에서 1사이가 될것이다 
   - 이건 위에 선형관계의 강도랑 비교해보면 이해가능함 
   - 표본의 상관계수는 언제나 그 절대값이 1이 넘지 않도록 만들어져 있음 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821001203660.png" alt="image-20210821001203660" style="zoom:50%;" />
   - 선형관계의 방향과 강도 한번에 파악 가능한지 보자
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821002849662.png" alt="image-20210821002849662" style="zoom:50%;" />
   - Sxy가 +양수이면 양의선형관계이고
   - Sxy가 -음수이면 음의선형관계임 
   - 근데  SxSy는 표준편차의 곱이므로 언제나 양수 >0 이므로
   - 따라서 
   - Sxy가 +양수이면 rxy도 음수
   - Sxy가 -음수이면 rxy도 음수임
   - 부호로 똑같이 선형관계 방향 파악 가능함
   - 강도는?
   - Sxy절대값이 크면 클수록 강도가 강한건데 최대 SxSy까지 갈 수 있다고 했지
   - 그러면 rxy기준으로는 절대값이 1에 가까우면 가까울수록 강도가 강하고
   - 0에 가까울수록 강도가 약하다
   - 즉, rxy는 지표만으로 얼마나 강한지 바로 반영해주는 지표임
   - 아래는 다양한 rxy의 산점도 사례
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821003303686.png" alt="image-20210821003303686" style="zoom:50%;" />
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821003243852.png" alt="image-20210821003243852" style="zoom:50%;" />
   - rxy = 1 : 완벽한 양의 선형관계
   - rxy = -1 : 완벽한 음의 선형관계 
   - rxy = 0.3 : 플러스니까 방향은 양의 방향, 강도는 0.3이니 0에 가까움, 산점도 보면 약한 선형관계
   - rxy = 0.8 : 플러스니까 방향은 양의 방향, 강도는 0.8이니 1에 가까움, 선주변에 많이 모여 있음
   - rxy = -0.3 : 마이너스니까 방향은 음의 방향, 강도는 0.3이니 0에 가까움, 약한 음의 선형관계
   - rxy = -0.8 : 마이너스니까 방향은 음의 방향, 강도는 0.8이니 1에 가까움, 강한 음의 선형관계
   - rxy = 0  : 공분산도 0  : 따라서 공처럼 뭉쳐져 있는 형태가 될 것 임 
   - 표본 상관계수는 공분산과 다르게 측정 단위에 의존하지 않음
   - kg단위로 구한 x,y고 그때의 상관계수 rxy가 0.7이었다고 해보자
   - 그램단위로 바꾸는 변환 즉 각각의 변수에 1000씩 곱하는 변환을 하더라도
   - rxy(Correlation)는 계속 0.7일 것임
   - 이때 조건은,
   - 곱하는 상수들이 부호가 같아야한다는 조건은 있기는 함 
   - 하지만 단위 변화는 대부분 그에 해당함 
   - 만약 두 변수에 대한 산점도를 그렸는데 음의 기울기를 가지는 직선위에 모든 자료값이 놓여 있는 경우라면 두 변수는 완벽한 음의 선형관계가 존재하는 경우로 이 경우 피어슨 상관계수는 정확히 -1이 된다. 

4. 순위를 이용한 상관계수

   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821004227876.png" alt="image-20210821004227876" style="zoom:50%;" />

   - 피어슨의 상관계수는 두 변수의 숫자형 변수의 연관성에 관한 추론할때
   - 가설검정할때 대표적으로 사용되는 지표인데
   - 사실 그걸 통계적 추론에 활용하기 위해서는
   - 각 변수가 정규분포를 따른다는 가정이 필요함
   - 근데 실제 자료는 그렇지 않은 경우가 많음 
   - 그럴때 대안으로 사용하는 상관계수로
   - 스피어만 상관계수, 켄달 상관계수 두개가 있음
   - 스피어만 상관계수는 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821004213304.png" alt="image-20210821004213304" style="zoom:50%;" />
   - 자료가 주어져 있어
   - 근데 그 자료가 정규분포를 따르지 않는 좀 치우침이 심하고 극단치가 나오고 이런 자료야
   - 그 자료 값을 그대로 쓰는게 아니라
   - 오른차순으로 정렬 했을 때 작은것부터 1위 2위 ~ 4위 ~ 이렇게 순위를 매긴다음에
   - 순위가 자료값이라고 생각하고 위에 설명한 피어슨의 상관계수를 구한거야 
   - 그러니까 스피어만 상관계수는 
   - 피어슨의 상관계수가 가지는 성질들 -1에서 1사이의 값을 가진다거나
   - 절대값이 클수록 강한거를 나타낸다
   - 부호가 플러스냐 마이너스냐로 방향을 파악한다
   - 이런 사실들이 동일하게 성립함
   - 그밖에,
   - 켄달의 상관계수 = 켄달의 타우 
   - <img src="숫자형 자료 - 선형적 연관성.assets/image-20210821004505826.png" alt="image-20210821004505826" style="zoom:50%;" />
   - 얘도 상관계수임
   - 두 숫자형 변수의 연관성 파악하는
   - 특히 정규분포로부터 벗어난 경우
   - 선형적 연관성을 나타내는 지표로 많이 활용됨
   - 이거는 n개의 자료가 있다면 걔네들중에 둘씩 짝지어서
   - x가 y보다 클 때 다른 하나도 x가 y보다 크냐
   - 이러면 이제 같은 방향에 부합한다라고 표현하고
   - x는 y보다 작은데 다른 하나는 x가 y보다 크다 이렇게 분포가 반대로 움직이는 쌍이 추출되면
   - 이거는 비부합이라고 표현함
   - 그래서 같은방향으로 움직이는 부합의 케이스가 다른방향으로 움직이는 비부합 케이스보다
   - 얼마나 많은지 이런거를 지표로 한 거임
   - 얘도 항상 -1에서 1사이 값을 가지고 그 부호를 가지고
   - 양의 선형 음의 선형 그대로 해석할 수 있음
   - 얘도 순위에 기반한 상관계수로 볼 수 있고
   - 특히 n개 자료를 둘씩 골라서 각각 짝지어서 
   - 같은 방향으로 움직이는지 다른 방향으로 움직이는지
   - 케이스에 비유를 이용해서 정의한다는 특징을 가짐 



# 선형적 연관성에 대한 지표 : 

# 공분산(스케일에 의존한다는 단점, 이를 보완하기 위한 상관계수 ->

# 상관계수(가장 중요한 피어슨의 상관계수, 정규분포 벗어날 경우 적용 가능한 스피어만 상관계수, 켄달 상관계수)

