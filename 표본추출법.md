# 표본추출법 

---------------

> - 통계적 추론의 필수적인 주요 개념 정리
> - 표본을 추출하는 대표적인 방법 

1. 통계적 추론?

   - 관련 기본 개념 

   - 관심대상 다 모아논 것 : 모집단
   - 모집단을 대표하는 값 : 모수 
   - ex) 회사에서 생산되는 전구의 평균 수명 알고싶다면
   - 모집단 : 그 회사에서 생산한 모든 전구들
   - 모집단에서 우리가 어떤 수치적인 특징을 나타내는 확률변수 : 모집단의 변수
   - 이때 변수는 모든 생산된 전구들의 수명에 해당함
   - 우리는 전구들의 평균수명에 관심있는데
   - 모집단의 변수 특징을 요약하는 값 : 모수
   - 확률변수, 확률분포함수, 특성치 이 개념들이 이 모집단에서 나오는 개념들을 설명하기 위한 것임
   - 모집단 : 전체 생산된 전구
   - 변수 : 전구의 수명 : 확률변수 X
   - X가 가지는 값들의 분포 가정 : X의 확률 밀도 함수
   - 평균 수명 알고싶다 : 이 분포의 기댓값 알고싶다
   - 이렇게 모집단의 특징을 요약하는 수 라는 뜻에서 모수라고 함
   - 모수 뮤 = 모평균에 해당함
   - 전구의 평균수명 알려면
   - 회사에서 생산된 모든전구 모아서 수명 측정하고 평균계산 하는 방법
   - 벗 시간과 비용이 너무 많이들고 팔려고생산한거를 수명측정하는데 다 사용할수도 없겠지전수조사해서 분포를 알아낸다음 기댓값구한다 이건 너무 비효율적임
   - 대신에 일부 표본을 추출함
   - 생산된 전구중에서 30개를 무작위로 추출한 다음 전구의 수명을 기록함
   - 그렇게 추출된 표본 :  x1~xn
   - n: 내가 추출한 표본의 수
   - 30개 랜덤하게 추출된 전구 : 표본
   - 수명을 기록하면 기록된값은 소문자로 표현해야 되는데 소문자로 표현된 수명의 기록값 관찰치 : 표본 자료
   - 표본자료가 주어지면 30개의 수명 정보를 가지고 있는게됨
   - 어떻게하면 뮤를 잘 맞출까 라는 문제를 고민
   - 얘네들을 잘 요약하는 통계량을 정의하고 통계량으로 모수를 맞추고자 하는 구조
   - 표본자료 요약 : 통계량
   - 관찰된 값은 소문자로 씀
   - 관찰된 결과 1002시간이 남았다고 한다면 (30개 표본의 평균이)
   - 이게 모집단을 잘 대표한다면 이 평균이 모평균에 가까울것이라 예상할수있지
   - 그래서 전구의 평균 수명은 뮤인데 뮤는 1002시간 정도로 추정된다
   - 모수에 관해 통계량 정보를 이용해서 파악하는 과정 : 통계적 추론
   - 통계적 추론에 필수적인 개념들
   - 모집단 : 관심 대상 전체
   - 모집단의 확률변수의 특성치 : 모수 (이게 맞추고자 하는 목표 값, 타깃)
   - 표본추측 표본정보 요약 : 통계량
   - 통계량정보로 모수를 맞추고자 하는것
   - 모수 : 모집단의 특성치
   - 통계량 : 표본의 특성치 
   - x바가 1002시간이 나왔는데 정말 뮤와 비슷할까?
   - 사실은 모집단 평균값 뮤와 우리 표본이 모집단을 잘 대표한다면 가깝긴 하겠지만
   - 분명히 차이는 존재할꺼고 이때 차이 : 오차 라고 부름
   - 오차의 크기가 어느정도 되는가
   - 오차를 줄이려면 어떻게해야하는가
   - 얘가 얼마나 믿을만한 정보가 될까
   - 이런거를 고민하는 학문 : 통계학
   - 모수들은 그리스문자로 표현함
   - 그에 대응되는 통계량은 알파벳 대문자로 표현함 
   - <img src="표본추출법.assets/image-20210821012247483.png" alt="image-20210821012247483" style="zoom:50%;" />
   - 어떤 집단을 대표하는 것인지 구분할 수 있어야 함 

2. 모집단의 분포와 확률표본

   - 모집단의 변수 X : 모든 전구의 수명값들
   - 수명값들의 분포 : 확률분포함수
   - <img src="표본추출법.assets/image-20210821012506225.png" alt="image-20210821012506225" style="zoom:50%;" />
   - 표본(X1~Xn)중에서 표본들이 확률표본 혹은 iid 표본 인것으로 가정하고 많은 추론통계 방법론들이 만들어져 있음
   - 그래서 확률표본이나 iid표본이라는게 어떤 조건 가지는지 보자
   - 어떤 표본이 확률표본(iid표본)따른다는 것은 이 두가지 조건 만족한다는 것이다
   - 첫째, n개의 확률변수는 서로 독립임
   - 반복한다면 매번 30개씩 뽑을때마다 다른 값이 관측될거임
   - <img src="표본추출법.assets/image-20210821013400622.png" alt="image-20210821013400622" style="zoom:50%;" />
   - 30개씩 수명 관찰하는 과정은 10만번쯤 반복해봤다고 하자
   - 그때 우리가 뽑은 n개 표본중 첫번째가 가지는 값들 다 모여있어
   - 이거는 같지않아 이거를 확률변수 X1로 정의
   - X1은 자기자신의 고유한 분포를 가지게 될 것임 
   - X2도 마찬가지 ~ X30도 마찬가지임
   - n개 표본 추출하는 과정을 무수히 많이 반복한다면 
   - n개중 각각이 가지는 값들의 확률변수를 정의한게 여기 있는 대문자로 표현한 확률 표본들임
   - 이때 각각이 그래서 확률변수인데 이 확률변수들이 만족해야 하는 조건을 보자
   - <img src="표본추출법.assets/image-20210821013235651.png" alt="image-20210821013235651" style="zoom:50%;" />
   - 얘네들은 서로 독립이어야 한다
   - 첫번째 표본이 얼마다 라는 사실이 두번째 세번째삼십번째 표본이 얼마가 나오는지에 아무런 영향을 주지 않아야 한다. (첫번째 조건 : 독립적으로 추출된다)
   - 모두 동일하게 모집단과 똑같은 분포를 가진다. (두번째 조건 : 모두 동일하게 모집단과 똑같은 모양 가져야 함)
   - 두번째 세번째도 마지막도 마찬가지
   - 모집단에서 가정한 이 분포가 가지는 X값들이 나올 가능성이 모집단을 그대로 모방하도록 각각의 이 표본값들이 추출되도록 만들어 주면은 이 두가지 조건을 만족하면 그때부터 우리는 그 표본은 확률표본이다 라고 표현을 하고
   - 이 확률표본이 두 조건  1)인디펜던트 조건과 2)동일identical하다는 조건을 합쳐서
   - iid표본이라고 용어를 정의를 하기도 함
   - 앞으로 표본이라고 얘기를 하면
   - 추론통계에 있는 많은 방법들은 다 이 확률표본 iid표본을 가정하고 이론들이 전개되었다 라고 이해해도 무방함 

3. 통계량과 표본분포

   - 통계량 : 표본가지고 요약한 값 : 확률표본의 함수
   - <img src="표본추출법.assets/image-20210821014043781.png" alt="image-20210821014043781" style="zoom:50%;" />
   - 통계량은 랜덤 베리어블임
   - 앞에서 모집단의 평균을 알고싶어서 n개씩 표본을 뽑아서 그것을 평균하자고 했었지
   - n개 1~30개 더해서 30으로 나눈거  = 표본평균 
   - <img src="표본추출법.assets/image-20210821014237916.png" alt="image-20210821014237916" style="zoom:50%;" />
   - 통계량이라고 부를 수 있음
   -  확률표본의 함수니까
   - 얘네들중 맥시멈 미니멈 중위수 다 확률표본으로만들면 통계량이라고 부름
   - 근데 기억해야할것은
   - 통계량도 확률변수라는 점임
   - 얘네들 평균 999 그아래 얘네들평균1002 얘네들평균1001 ....
   - n개씩 표본 뽑을때마다 평균값이 조금씩 달라짐
   - 다 모아서 확률변수 X바 그래서 대문자로 쓰는거임 
   - 한번 관찰된 평균을 표현하고 싶으면 그건 소문자x바로 표현해야함
   - 그렇게 확률표본의 함수인 통계량
   - 다시한번 강조하지만 랜덤 배리어블이고 확률변수임
   - 고유한 자기자신의 분포 가질 수 있음
   - 다 모아서 가지는 10만개의 평균이 있겠네
   - 10만개 평균 다 모아서 히스토그램 같은거 그리면
   - X바가 가지는 값들의 분포 찾을 수 있음
   - <img src="표본추출법.assets/image-20210821014730188.png" alt="image-20210821014730188" style="zoom:33%;" />
   - 얘는 f(x)가 아니라 X바의 분포임
   - 이렇게 확률표본의 함수인 통계량이 가지는 확률 분포를 이름을 다르게 부름
   - 표본분포 : 통계량의 확률분포
   - <img src="표본추출법.assets/image-20210821014828319.png" alt="image-20210821014828319" style="zoom:50%;" />
   - 표본분포를 정확하게 아는것은 추론통계에서 중요함
   - X바가 1002시간이 나왔다고 했지
   - 이때 뮤추정하는문제
   - 여기서 오차가 존재할거라했지
   - n개의 iid표본을 뽑아서
   - 지금은 30개야
   - X바 구하는 과정이 많이 반복되서 X바가 가지는 값들의 분포를 찾을 수 있다면
   - 이 분포의 정보를 활용해서
   - 어떤개념들로 확장할 수 있냐면
   - 한번 평균을 계산했더니 평균이 1002시간이 나왔어 하지만
   - 1002시간에 플러스마이너스1사이에 이 타깃은 존재할거고 그걸내가 95%신뢰한다
   - 이렇게 오차의 크기가 어느정도되는지 그리고 그걸 얼마나 믿을만한지
   - 이런것들에 대한 정보를 가공할 수 있게 됨
   - X바가 이론적으로 가지는 값들의 분포를 이용하면
   - X바에서 플러스마이너스 어떤 상수값을 이용해서 만들어낸 구간에 
   - 타깃이 포함되고 그걸 우리가 얼마만큼 신뢰하는지 확률을 계산할 수 있기 때문임
   - 이렇게 통계량의 확률정보를 안다면 보다 과학적인 추론통계를 할수있기때문에
   - 표본분포가 어떤통계량으로 추정할까? 그리고 그 통계량의 표본분포가 무엇일까?
   - 이 두개를 아는게 추론통계를 할수있는가를 결정하는 핵심적인 내용에 해당함
   - 표본분포의 분포에 관한 사례
   - 파퓰레이션분포
   - <img src="표본추출법.assets/image-20210821015731054.png" alt="image-20210821015731054" style="zoom:67%;" />
   - 모집단의 변수 모평균이 여기 있음
   - n개씩 자료를 뽑았음
   - 그런다음에 표본평균 계산했음
   - 또 n개뽑아 표본평균 계산함
   - n개씩 표본뽑는과정 5번 반복함
   - 그때마다 평균 조금씩 바뀌었죠
   - 이걸 무수히 반복할 수 있다면
   - 그때나오는 평균들 다 모아서 X바의 샘플링 디스트리뷰션 표본분포 찾을수있음
   - 여기서 한가지 중요한 사실 기억할것
   - iid표본으로 계산한 표본의 평균은 그 분포가 기댓값과 분산 
   - 기댓값이 정확히 모평균과 일치함
   - 그래서 X바의 분포인데 무게중심이 또 뮤가됨
   - <img src="표본추출법.assets/image-20210821020305008.png" alt="image-20210821020305008" style="zoom:50%;" />
   - E(X바)=뮤
   - 표본의 평균으로 모평균을 추정하는게 좋다라는걸 지지하는 근거가되는 사실임
   - 표본평균이 비록 n개 자료만 가지고 계산한거지만
   - 엉뚱한애가나온게아니라 우리가맞추고자하는 뮤근처에서 나올확률이높다를
   - 설명할수있는 내용이기떄문
   - 또 X바분포의 분산은 모집단의 분산 시그마제곱과 밀접한 연관이 있어서
   - 시그마제곱을 엔으로 나눈것과 같음
   - 그냥 X의 분산이 시그마제곱일때 그런 
   - 그런 X를 n개씩 반복해서 추출한다음에
   - 평균을 계산하는 과정도 반복해서 계산을 함
   - 그랬을 때 
   - 평균이 변동하는 정도는 모분산 시그마제곱을 즉 X의 분산을 표본수로 나눈것과 같음
   - 그러면 표본이 많아진다면 표본이 많아지면 표본평균의 분포가 무게중심은 계속 뮤지만
   - 분산이 줄어들겠네요 n이 커지면 V(X바) 얘가 작아지겠죠
   - 그래서 표본이 크면클수록 표본평균은 모평균과 더욱 가까운 곳에서 발생하는 애다 라는 사실
   - 요 내용이 아주 중요함
   - 뒤에 추론통계에서도 여러번 언급될 내용임

4. 표본추출방법

   - 실제로 데이터 분석할때 표본 추출할 때 어떤 방식으로 모집단을 잘 대표하도록 추출할 수 있는가 
   - 이에 관한 설명 
   - 대표적으로 활용되는 4가지 방법 

   <img src="표본추출법.assets/image-20210821020002383.png" alt="image-20210821020002383" style="zoom:50%;" />

   - 1) 단순임의추출법 (srs)

        <img src="표본추출법.assets/image-20210821020838399.png" alt="image-20210821020838399" style="zoom:50%;" />

        - 가장 단순한 방식
        - 모집단 수 클 때 적용할 수 있는 방법
        - 많이 활용되는 방법
        - 지금부터는 유한모집단을 가정함
        - 모집단 구성하는 원소가 대문자 N으로 표현되어 있다면
        - 그중에 표본은 내가 소문자 n으로 썼어
        - 요만큼의 표본을 추출하고 싶다 라는 상황이라면
        - 그리고 모집단에 대한 다른 추가적인 정보가 없다면
        - 그냥 모집단의 원소의 수만큼 하나하나의 각 원소의 1부터 까지의 번호를 부여해
        - 그런 다음 이 숫자를 난수표에서 숫자를 추출하는 방식으로
        - 내가 원하는 표본수만큼 번호를 추출하는거야
        - 예를들어 모집단이 100개 원소로 구성되어 있어
        - 그럼 모든 원소가 일단 번호를 달고 있어
        - 내가 3개의 표본 뽑고싶다면 3개의 난수를 뽑는거야
        - 21, 19, 98 이렇게 나왔다고하면
        - 요 번호에 대응되는 원소를 뽑아주면 돼 

     2) 계통추출법

        <img src="표본추출법.assets/image-20210821020907022.png" alt="image-20210821020907022" style="zoom:50%;" />

        - 모집단을 좀 더 잘 대표하는 방식
        - 모집단의 원소는 여전히 대문자 N 으로 표현
        - 그랬을 때 내가 원하는 표본수는 소문자 n
        - 모집단 원소에 1부터 대문자 N까지의 번호를 부여함
        - 여기까지는 srs와 같음
        - 그다음에 우리가 계통추출법에서는 구간을 나눔
        - 전체 모집단의 원소는 12개임
        - 그리고 내가 뽑고자하는 표본의 수는 4임
        - 그러면 K개씩 구간을 나누는데 이때 K는 전체 모집단의 원소를
        - 내가 추출하고자하는 표본의 수 4로 나눠서 3개씩 쪼갬
        - 3개씩 분할
        - 그런다음에 첫번째 구간에 지금은 3개씩있는데 1,2,3중에 하나를 랜덤하게 추출함
        - 그때만약 내가 1번을 추출했다면 그다음부터는 3개씩 건너뛰어가면서 원소를 추출해서
        - 결과적으로 네개의 표본이 추출됨 
        - 계통추출법은 만약에 사이클을 가지는 데이터라면
        - 적절하지 않음
        - 예를들어 자료값이 3,5,7,3,5,7 이렇게 주기를 가지는 자료라고 한다면
        - 그런데 평균을 구하고 싶다면
        - 평균은 5가 되어야하지 근데 만약에 이 방식으로 표본을 추출한다면
        - 3만 4번 추출되는 결과가 나오고 아무리 많이 추출해도 평균이 3이됨
        - 이런식으로 실제 맞추고자하는걸 평균적으로 잘 못맞추는게 편향이라고 하는데
        - 만약 자료가 사이클을 가지는 자료라고하면 계통추출법은 이렇게 추정량이 편향의 문제가 생길 수 있다는 단점이 있음 

     3. 집락추출법

        <img src="표본추출법.assets/image-20210821021002671.png" alt="image-20210821021002671" style="zoom:50%;" />

        - 모집단을 좀 더 잘 대표하는 방식
        - 집락추출 & 층화추출 비슷해서 헷갈림 잘 구분해야함
        - 두개의 공통점은 모집단을 몇개로 분할해서 작은 덩어리로 쪼개는거
        - 그 덩어리를 이용해서 샘플링한다는 공통점
        - 그런데 차이점은 뭐냐면
        - 집락 클러스터 샘플링은 전체가 모집단이고 A B C D 이게 분할된 작은 덩어리들임
        - 분할 안에 있는 애들이 이미 모집단을 잘 반영하도록 섞여있는 거임
        - 자료들이 잘 골고루 섞여있는 경우
        - 이러면 아주 쉽게 샘플링 할 수 있음
        - 이중 하나의 클러스터만 추출하거나 아니면 그중의 일부를 srs 심플랜덤샘플링으로 원하는 표본만큼 추출하거나 이렇게 할 수 있음
        - 결과적으로 표본조사하는데 걸리는 시간을 단축시켜주겠지
        - 내가 분할한 개개의 집단이 자체적으로 모집단을 잘 반영할수있도록 골고루 섞여있어야함
        - 빨초노 이런식으로 
        - 집락추출이 층화추출보다 조사가 더 용이하고 조사비용이 적게 든다 
   
     4) 층화추출법 
   
        <img src="표본추출법.assets/image-20210821020934965.png" alt="image-20210821020934965" style="zoom:50%;" />
   
        - 모집단을 좀 더 잘 대표하는 방식
        - 집락추출 & 층화추출 비슷해서 헷갈림 잘 구분해야함
        - 두개의 공통점은 모집단을 몇개로 분할해서 작은 덩어리로 쪼개는거
        - 그 덩어리를 이용해서 샘플링한다는 공통점
        - 층화추출법은 층을 우리가 나누는거야
        - 이때 모집단이 여러개의 이질적인 것들로 구성되어 있다면
        - 이질적인 특성을 감안해서 이렇게 분할을 하고
        - 분할된 각각의 덩어리가 이질적이라고 하면
        - 특징들을 가지는 것들이 있는거지
        - 걔네들이 그 안에서는 분할된 각각의 작은 덩어리안에서는
        - 서로 균질적으로 만들어주는거야
        - 초록색은 초록색끼리 빨간색은 빨간색끼리 노란색은 노란색끼리
        - 이렇게 묶는거야
        - 그다음에 각각의 덩어리에서 추출을 하는거
        - 지금처럼 3개,3개,3개면 1개씩 뽑으면되는데
        - 만일 A는 20% B는 50% C는 30% 이렇게 층이 나뉜다면
        - 추출할때도 초록색은 20% 빨간색은 50% 노란색은 30%
        - 표본을 100개뽑는다면 20개, 50개,30개 이렇게 추출되도록 해줘야함
        - 그렇게해서 모집단을 보다 더 잘 반영하는 샘플이 만들어질 수 있음
   
   - 각각의 차이점 잘 구분해야함
   
   - 어떤 추출방법을 쓰느냐에 따라 분석 결과 및 해석에 큰 차이가 발생할 수 있음 
   
   - 모집단이 어떤 형태인가를 감안해서 4가지 추출방법중 하나를 잘 선택해야함 
   
     
   
   # 통계적 추론에 필요
   
   # : 모집단, 모수, 4가지 표본추출법(표본 어떻게 추출)
   
   # 표본추출하고나면 그 표본을 정보를 요약하는 통계량을 만들고, 그 통계량의 표본분포라는걸 이용해서 추론을 할 수 있다 